{% load staticfiles %}

<html>
<head>
	<link rel="shortcut icon" type="image/png" href="{% static 'media/favicon.jpg' %}"/>

	<title>Vestivise â€“ Simple Investment Reporting</title>
	<link href="https://fonts.googleapis.com/css?family=Lato:400,300" rel="stylesheet" type="text/css">

	<!-- Compiled and minified CSS -->
  	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="{% static 'bower_components/mdi/css/materialdesignicons.min.css' %}" media="all" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" type="text/css" href="{% static 'build/css/landingPage.css' %}">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/highcharts-more.js"></script>
   	<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

</head>
<body>

	<section>
		<div class="welcome">
			<img id="welcome-header" src="{% static 'media/images/logo.svg' %}">
			<h2 id="welcome-tag"> Simple Investment Reporting </h2>
		</div>
	</section>
    <br><br>
	<section id="register">
		<div id="emailDiv">
			<div class="container">
				<div class="row">
					<div id="registerHeader" class="col m12">
						Subscribe and share for a free upgrade to Vestivise Premium.
					</div>					
				</div>		
				<div class="row" style="background-color:#fff; padding: 1em;">
					<form id="submitEmail">
						<div class="input-field col m12">
							<i style="color:#F24258;" class="material-icons prefix">perm_identity</i>
							<input required="" aria-required="true" name='firstName' id="firstName" type="text" class="validate">
	          				<label for="firstName">First Name</label>
          				</div>			

						<div class="input-field col m12">
	          				<i style="color:#F24258;" class="material-icons prefix">perm_identity</i>
							<input required="" aria-required="true" name='lastName' id="lastName" type="text" class="validate">
	          				<label for="lastName">Last Name</label>		
						</div>

						<div class="input-field col m12">
							<i style="color:#F24258;" class="material-icons prefix">email</i>
							<input required="" aria-required="true" name='email' id="email" type="email" class="validate">
	          				<label for="email">Email</label>	
	          			</div>

          				<button class="btn waves-effect waves-light" type="submit">Submit
    						<i class="material-icons right">send</i>
  						</button>
					</form>
				</div>		
			</div>
		</div>
	</section>

	<!-- Modal Structure -->
	<div id="modal1" class="modal modal-fixed-footer">
		<div class="modal-content">
			<h4>Know anyone else?</h4>
			<p>
				Invite some friends! If at least one signs up, you get Vestivise Premium completely free! <span style="color: #2e8ece;">Premium provides deep insights into each category and user comparisons for the entire report.</span>
			</p>
			<div class="container">
				<div class="row">
					<form id="referalForm">
						<div class="input-field col s12">
                        <input name='email1' type="email" class="validate">
                        <label for="email1">Email 1</label>
	                    </div>
	                    <div class="input-field col s12">
	                        <input name='email2' type="email" class="validate">
	                        <label for="email2">Email 2</label>
	                    </div>
	                    <div class="input-field col s12">
	                        <input name='email3' type="email" class="validate">
	                        <label for="email3">Email 3</label>
	                    </div>
					</form>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button id="submitReferal" class="modal-action modal-close waves-effect waves-green btn-flat">Submit</button>
			<button  class="modal-action modal-close waves-effect waves-green btn-flat">No Thanks!</button>
		</div>
	</div>
  	

</body>

<script>
	Highcharts.setOptions({
		chart: {
        style: {
            fontFamily: 'Raleway, sans-serif'
        }
    }
	});
</script>

<script src="{% static 'build/js/fees.js' %}"></script>
<script src="{% static 'build/js/bar.js' %}"></script>
<script src="{% static 'build/js/pie.js' %}"></script>
<script src="{% static 'build/js/risk.js' %}"></script>
<script src="{% static 'build/js/sectionPie.js' %}"></script>

<script>

	$('#submitEmail').on('submit', function(e){
		e.preventDefault();

		var email = $('#email').val();
		var firstName = $('#firstName').val();
		var lastName = $('#lastName').val();
		
		var mailingListPayload = {
			email : email,
			csrfmiddlewaretoken: '{{ csrf_token }}',
			firstName : firstName,
			lastName : lastName
		};

		var mailingListSubscribe = $.ajax({
										url: '{% url "email-list" %}',
										type: 'POST',
										data: mailingListPayload,
									});
		
		mailingListSubscribe
		.done(function(){
			console.log('success');
		})
		.fail(function(e){
			console.log(e);
		})
		.always(function(){
			$('#modal1').openModal();
		});
		
	});

	$('#submitReferal').click(function(e){
		e.preventDefault();
		var data = $('#referalForm :input').serializeArray();
		data.forEach(function (object) {
			var email = object.value;

			if(!email){
				return true;
			}

			var data = {
				email : email,
				csrfmiddlewaretoken: '{{ csrf_token }}',
				refree: $('#email').val()
			}
			$.ajax({
				url: '{% url "referal-list" %}',
				type: 'POST',
				data: data,
			})
			.done(function() {
				console.log("success");
			})
			.fail(function() {
				console.log("error");
			})
			.always(function() {
				console.log("complete");
			});
			
		});
	});

 	var hidden = false;
	var toggleVar = 0;

	$('#toggleMod').click(function() {

		if(toggleVar == 0){
			$('#toggleChartBtn').show();
			$('#assetBreakMod').highcharts().destroy();
			$('#assetBreakMod').highcharts(sectorOpt);
		}else{
			$('#assetBreakMod').highcharts(assetOpt);
			$('#toggleChartBtn').hide();
		}

		toggleVar = toggleVar == 0 ? 1 : 0;
		
	});

	var dataToggle = 0;

	$('#toggleChartBtn').click(function(){
		var chart = $('#assetBreakMod').highcharts();
		if(dataToggle == 0){
			chart.setTitle({text: "Bond Sectors"});
			chart.series[0].remove();
			dataSeries[0].data = data2;
			chart.addSeries(dataSeries[0]);
		}else{
			chart.setTitle({text: "Equity Sectors"});
			chart.series[0].remove();
			dataSeries[0].data = data1;
			chart.addSeries(dataSeries[0]);
		}
		chart.redraw();
		dataToggle = dataToggle == 0 ? 1 : 0;
	});
	

	$('#getStarted').click(function() {
   		var offset = 999; //Offset of 20px

    	$('html, body').animate({
        	scrollTop: $("#register").offset().top + offset
    	}, 1000);
	});
</script>
<br>
<br>
</html>