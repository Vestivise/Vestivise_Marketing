{% load staticfiles %}

<html>
<head>
	<title>Vestivise â€“ Simple Investment Reporting</title>
    <link rel="shortcut icon" type="image/jpg" href="{% static 'media/favicon.jpg' %}"/>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,300" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="{% static 'build/css/dashboard.css' %}">

	<!-- Compiled and minified CSS -->
  	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
  	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="{% static 'bower_components/mdi/css/materialdesignicons.min.css' %}" media="all" rel="stylesheet" type="text/css" />
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/highcharts-more.js"></script>
   	<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

</head>
<body>

	<nav>
	    <div class="nav-wrapper vestBar">
      		<a href="#" class="brand-logo center"><img height="100%" src="{% static 'media/images/logo.svg' %}" alt=""></a>
			<ul style="margin-right : 40px" id="nav-mobile" class="right hide-on-med-and-down">
				<li><a href="{% url 'subscribe' %}">Subscribe</a></li>
			</ul>
		</div>
  	</nav>

  	<div class="moduleContainer">
  		<div class="row moduleRow">
		<div class="col s12 m6 module orange" style="background: #BBDEFB !important; border:solid; border-color: #f34258; border-width: 2px;">
			
			<div id="orangeContent">
				<div id="toggleChart" class="fixed-action-btn">
				    <a style="display: none;" id="toggleChartBtn" class="btn-floating blue waves-effect">
				      <i class="large material-icons">insert_chart</i>
				    </a>
				</div>
				<div id="assetBreakMod"></div>
				<p class="modTitle R">Assets</p>
			</div>
			
		</div>
		<div class="col s12 m6 module green" style="background: #BBDEFB !important; border:solid; border-color: #f34258; border-width: 2px;">
			<div id="greenContent">
				<div id="returnPerYearMod"></div>
				<p class="modTitle L">Returns</p>
			</div>
		</div>
	</div>

	<div class="row moduleRow">
		<div class="col s12 m6 module purple" style="background: #BBDEFB !important; border:solid; border-color: #f34258; border-width: 2px;">
			<div id="purpleContent">
            <p id="t1" class="modTitle R" style="z-index:999999;">Risks</p>
				<div id="riskMod"></div>
			</div>
		</div>
		<div class="col s12 m6 module blue" style="background: #BBDEFB !important; border:solid; border-color: #f34258; border-width: 2px;">
			<div id="blueContent">
            <p id="t2" class="modTitle L" style="z-index:999999;">Costs</p>
				<div id="feeMod"></div>
			</div>
		</div>
	</div>
  	</div>
    <div style="position:fixed; bottom:0; height: 4em; background:#f34258; z-index:999999;">
    
    </div>

</body>

<script>
	Highcharts.setOptions({
		chart: {
        style: {
            fontFamily: 'Lato, sans-serif'
        }
    }
	});
</script>

<script src="{% static 'build/js/fees.js' %}"></script>
<script src="{% static 'build/js/bar.js' %}"></script>
<script src="{% static 'build/js/pie.js' %}"></script>
<script src="{% static 'build/js/risk.js' %}"></script>
<script src="{% static 'build/js/sectionPie.js' %}"></script>

<script>
 	var asset = false;
	$('#orangeContent').click(function(){
		if(!asset){
			$('#blueContent').hide();
			$('#purpleContent').hide();
			$('#greenContent').hide();

			$('.module.green').hide();
			$("body").css("background-color", "#BBDEFB");

			$('.module.orange').animate({
				width: "100%",
				height: "100%",
			}, {
				duration: 1000,
				step: function(){
					$("#assetBreakMod").highcharts().reflow();
				},
				done: function(){
					$('.module.purple').hide();
					$('.module.blue').hide();
					document.getElementById("orangeContent").style.height = "calc(100% - 4em)";
					asset = true;
				}
			});
		}
		else{
			document.getElementById("orangeContent").style.height = "100%";
			$('.module.purple').show();
			$('.module.blue').show();

			$('.module.orange').animate({
				width: "50%",
				height: "50%",
			}, {
				duration: 1000,
				step: function(){
					$("#assetBreakMod").highcharts().reflow();
				},
				done:function(){
					$('.module.green').show();
					$('#blueContent').show();
					$('#purpleContent').show();
					$('#greenContent').show();
					
					asset = false;
				}
			});
		}
	});	
	

	var toggleVar = 0;

	$('#toggleMod').click(function() {

		if(toggleVar == 0){
			$('#toggleChartBtn').show();
			$('#assetBreakMod').highcharts().destroy();
			$('#assetBreakMod').highcharts(sectorOpt);
		}else{
			$('#assetBreakMod').highcharts(assetOpt);
			$('#toggleChartBtn').hide();
		}

		toggleVar = toggleVar == 0 ? 1 : 0;
		
	});

	var dataToggle = 0;

	$('#toggleChartBtn').click(function(){
		var chart = $('#assetBreakMod').highcharts();
		if(dataToggle == 0){
			chart.setTitle({text: "Bond Sectors"});
			chart.series[0].remove();
			dataSeries[0].data = data2;
			chart.addSeries(dataSeries[0]);
		}else{
			chart.setTitle({text: "Equity Sectors"});
			chart.series[0].remove();
			dataSeries[0].data = data1;
			chart.addSeries(dataSeries[0]);
		}
		chart.redraw();
		dataToggle = dataToggle == 0 ? 1 : 0;
	});
	

</script>

</html>